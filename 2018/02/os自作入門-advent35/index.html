

  
    
  


  





  

<!DOCTYPE html>
<html lang="ja">
  <head>
    
    
      <script async src="https://www.googletagmanager.com/gtag/js?id=UA-98609730-1"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-98609730-1');
      </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.54-DEV with theme Tranquilpeak 0.4.3-BETA">
    <title>OS自作入門 -Advent35-</title>
    <meta name="author" content="wataridori inc.">
    <meta name="keywords" content="株式会社ワタリドリ, wataridori inc., blog, wtrdr, ワタリドリ, ブログ, wataridori inc.">

    <link rel="icon" href="https://blog.wataridori.co.jp/favicon.png">
    

    
    <meta name="description" content="今回は10step目！OSのメモリ管理を行います。">
    <meta property="og:description" content="今回は10step目！OSのメモリ管理を行います。">
    <meta property="og:type" content="company">
    <meta property="og:title" content="OS自作入門 -Advent35-">
    <meta property="og:url" content="/2018/02/os%E8%87%AA%E4%BD%9C%E5%85%A5%E9%96%80-advent35/">
    <meta property="og:site_name" content="WATARIDORI BLOG">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="WATARIDORI BLOG">
    <meta name="twitter:description" content="今回は10step目！OSのメモリ管理を行います。">
    
    

    
    

    
      <meta property="og:image" content="https://cdn.rawgit.com/wtrdr/blog/gh-pages/img/logo.jpg">
    

    
    
    

    

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.css" integrity="sha256-vuXZ9LGmmwtjqFX1F+EKin1ThZMub58gKULUyf0qECk=" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" integrity="sha256-SEa4XYAHihTcEP1f5gARTB2K26Uk8PsndQYHQC1f4jU=" crossorigin="anonymous" />
    
    
    <link rel="stylesheet" href="https://blog.wataridori.co.jp/css/style-jsjn0006wyhpyzivf6yceb31gvpjatbcs3qzjvlumobfnugccvobqwxnnaj8.min.css" />
    
    
      
        <link rel="stylesheet"  href="https://blog.wataridori.co.jp/css/custom.css">
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://blog.wataridori.co.jp/">WATARIDORI BLOG</a>
  </div>
  
    
      <a class="header-right-icon facebook-link"
         href="https://www.facebook.com/wataridori.co.jp" target="_blank" rel="noopener">
    
    
      <i class="fa fa-lg fa-facebook-official"></i>
    
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://blog.wataridori.co.jp/">
          <img class="sidebar-profile-picture" src="https://cdn.rawgit.com/wtrdr/blog/gh-pages/img/logo.jpg" alt="プロフィール画像" />
        </a>
        <h4 class="sidebar-profile-name">wataridori inc.</h4>
        
          <h5 class="sidebar-profile-bio">未知の体験とワクワクを。</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://blog.wataridori.co.jp/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">ホーム</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://blog.wataridori.co.jp/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">タグ</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://blog.wataridori.co.jp/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">アーカイブ</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://blog.wataridori.co.jp/page/about-us">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">プロフィール</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/wtrdr" target="_blank" rel="noopener">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://blog.wataridori.co.jp/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      OS自作入門 -Advent35-
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time itemprop="datePublished" datetime="2018-02-08T00:00:00&#43;09:00">
        
  
  
  
  
    2018/02/08
  

      </time>
    
    
  <a class="link-unstyled" href="https://blog.wataridori.co.jp/tags/%E3%83%88%E3%83%AA%E3%83%AD%E3%82%B0/">トリログ</a>

  <a class="link-unstyled" href="https://blog.wataridori.co.jp/tags/tech/">Tech</a>

  <a class="link-unstyled" href="https://blog.wataridori.co.jp/tags/advent/">Advent</a>

  <a class="link-unstyled" href="https://blog.wataridori.co.jp/tags/%E6%8C%91%E6%88%A6/">挑戦</a>


  </div>


</div>

          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              

<h2 id="step10-osのメモリ管理">Step10 OSのメモリ管理</h2>

<h3 id="osの役割">OSの役割</h3>

<p><strong>コンピュータの資源を管理し、複数のタスクに効率的に割り当てること</strong></p>

<p>と言えるだろう。</p>

<p>KOZOSでは処理をタスクとして分割するためにスレッドという仕組みを用意した。スレッドの実行時間は <strong>CPU時間</strong> という資源を割り当てていることになる。</p>

<h4 id="コンピューターの3大要素">コンピューターの3大要素</h4>

<ul>
<li>CPU<br /></li>
<li>メモリ<br /></li>
<li>I/O<br />
<br /></li>
</ul>

<p>がある。上述の通りスレッドの役割は <strong>CPU時間を複数のタスクに配分すること</strong> である。</p>

<h4 id="メモリ管理の必要性">メモリ管理の必要性</h4>

<p>別な資源であるメモリについて考える。</p>

<p>メモリは通番のアドレスに配置されている単なる記憶領域であると言える。ただ、スレッド間で共有するので衝突する可能性がある。そのため管理する必要があるのだが、たとえばリンカ・スクリプトを利用することによって有限のサイズのメモリ領域を必要に応じて割り当てることができる。</p>

<p>しかし、これでは静的な取り扱いになってしまい、必要なときに確保するとか、不要になったら開放するとか、開放された領域を使い回すとかができない。なのでこれを動的な取り扱いができるようにしていく。</p>

<ul>
<li>メモリの獲得動作 = allocate<br /></li>
<li>メモリの開放処理 = free<br />
<br /></li>
</ul>

<p>と呼ぶ。</p>

<h3 id="メモリ管理の概要">メモリ管理の概要</h3>

<ul>
<li><p>可変サイズのメモリ管理<br />
c言語でいう <code>malloc()</code>で実装されているメモリ管理方法<br />
1kbyteの領域が必要なら</p>

<pre><code class="language-c">p = malloc(1024);
</code></pre></li>

<li><p>固定サイズのメモリ管理<br />
16byteをL個、128byteをM個、1024byteをN個。<br />
といった感じでメモリを確保しておく</p></li>
</ul>

<p>の二種類が必要である。</p>

<h4 id="malloc-でのメモリ管理">malloc()でのメモリ管理</h4>

<p>どのように実装していくか。</p>

<h5 id="可変サイズの領域を切り売りする方法">可変サイズの領域を切り売りする方法</h5>

<p>以下のように先に領域を確保してそのうちのいくつかを返すようにする方法。</p>

<pre><code class="language-c">char memory_area[128 * 1024]
</code></pre>

<p>これで128kbyteのメモリプールを作ることができる。</p>

<p>この中で確保されたメモリの先頭部分にヘッダと呼ばれる情報（領域のサイズ、獲得済み・開放済みなどの情報）を保持しておくようにする。こうすることによって、アドレスを渡せばメモリ内の情報のみを利用してメモリの開放や確保を行うことができるようになる。（ポインタだけ渡されても<code>malloc</code>や<code>free</code>は内をしたらいいのかわからないため）</p>

<p>また、このヘッダ情報に<code>next</code>ポインタを持たせて、 <em>獲得した領域</em> と <em>開放した領域</em> をリンクリストで管理できるようにすると、いくつ<code>malloc</code>されたとしても<code>next</code>が<code>NULL</code>になるポインタまで追えば <em>開放された領域</em> を検索することが可能になる。もし <em>開放された領域</em> に必要なサイズを満たすものがなければ未使用領域から割り当てれば良い。</p>

<pre><code>01 head1 size: 5, next: 11, used, &lt;- used_pointer
02 used
03 used
04 used
05 used
06 used
07 head2 size: 3, next: 14, free  &lt;- free_pointer
08 free
09 free
10 free
11 head3 size: 2, next: NULL, used
12 used
13 used
14 head4 size: 4, next: NULL, free
15 free
16 free
17 free
18 memory pool &lt;- unused_pointer
19 memory pool
20 ....
</code></pre>

<p>こんな感じで、<code>used_pointer</code>から<code>next</code>を辿れば<code>head3</code>が示すところまでメモリが利用されていて、<code>free_pointer</code>から辿れば<code>head2</code>と<code>head4</code>がそれぞれ空いているのがわかり、<code>unused_pointer</code>を見れば未使用領域がわかるようになる。</p>

<p>（途中の抜き出しを考慮する必要があるため実際の実装には<code>prev</code>ポインタも持たせて逆に辿れるようにもする）</p>

<p>このような可変サイズのメモリ領域を <strong>ヒープ領域</strong> と呼ぶ。</p>

<p>ちなみに獲得と開放の繰り返しにより発生する <strong>フラグメンテーション</strong> というものがあるが、とりあえず置いておく。</p>

<h4 id="可変サイズでの管理の欠点">可変サイズでの管理の欠点</h4>

<p>上記の方法でOSがメモリ管理をすることができるようになるが、実はあまり向いてないらしい。</p>

<p>理由はメモリの開放済み領域を検索する際に検索が必要になり、OS内部にこのような処理があるとOSの応答性が悪くなったり性能にバラツキが出てしまう。</p>

<h5 id="固定サイズのメモリ管理">固定サイズのメモリ管理</h5>

<p>16byteをL個、128byteをM個、1024byteをN個というようにメモリプールを用意し、それぞれをリンクリストにして管理する。メモリ獲得時にはリンクリストの先頭の領域を割り当て、開放された領域はリンクリストに接続するようにしておけばいい。</p>

<p>欠点といえば、実際に必要なサイズよりも大きな領域が割り当てられるため効率が良くない。だが、検索等は必要なく、先頭にあるものを割り当てればいいので高速な処理を行うことができる。</p>

<h3 id="メモリ管理の実装">メモリ管理の実装</h3>

<p>動的なメモリの確保・開放のサービスを追加する。システムコールの追加となる。</p>

<p>変更するファイル</p>

<ul>
<li>memory.h, memory.c （新規）<br /></li>
<li>test10_1.c（新規）<br /></li>
<li>ld.scr（修正）<br /></li>
<li>syscall.h, syscall.c（修正）<br /></li>
<li>kozos.h, kozos.c（修正）<br /></li>
<li>main.c（修正）<br /></li>
<li>Makefile（修正）<br />
<br /></li>
</ul>

<h4 id="メモリプールの追加">メモリプールの追加</h4>

<p>まずメモリプールとして利用するRAMの空き領域を<a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/ld.scr">ld.scr</a>で定義する。</p>

<pre><code>  .freearea : {
    _freearea = . ;
  } &gt; ram
</code></pre>

<p>を追加</p>

<h4 id="メモリ管理ライブラリ">メモリ管理ライブラリ</h4>

<p><strong>固定サイズのメモリ管理</strong> を行うライブラリを実装する。<a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/memory.h">memory.h</a>に以下の三つの関数を用意する。</p>

<ul>
<li>kzmem_init()<br />
メモリ・プールの初期化<br /></li>
<li>kzmem_alloc()<br />
メモリ領域の確保<br /></li>
<li>kzmem_init()<br />
メモリ領域の開放<br />
<br /></li>
</ul>

<h4 id="構造体の定義">構造体の定義</h4>

<p><a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/memory.c">memory.c</a>に構造体の定義を行う。</p>

<ul>
<li>kzmem_block<br />
メモリ・ヘッダに相当。<br />
領域のサイズ情報とリンクリストで管理するための<code>next</code>ポインタがある。<br /></li>
<li>kzmem_pool<br />
メモリ・プールの情報格納用。<br />
固定である領域のサイズと実際に利用するサイズの差が大きいと利用効率が悪くなる。<br />
このため数種類のブロック・サイズのメモリプールを用意する必要がある。<br />
<br /></li>
</ul>

<h4 id="メモリ-プールの初期化">メモリ・プールの初期化</h4>

<p><a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/memory.c">memory.c</a>に実装を行う。</p>

<p><code>kzmem_init_pool()</code>でメモリ・プールの初期化を行う。ポインタのポインタが出てくるのだが詳細が書籍に載っていたので良く読んでおこう。</p>

<p>なおメモリブロック（メモリヘッダ + データ領域）がそれぞれ16byte, 32byte, 64byteなのでヘッダ部分を引くと利用できる データ領域がそれぞれ8byte, 24byte, 56byteとなるので注意を。</p>

<h4 id="メモリ領域の獲得">メモリ領域の獲得</h4>

<p><a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/memory.c">memory.c</a>に実装を行う。</p>

<p><code>kzmem_alloc</code>を実装。必要とされるサイズを格納できるメモリプールを検索し、開放済み領域のリンクリストの先頭から領域を確保するようにしている。確保したら該当のメモリブロックはリンクリストから外しデータ領域の先頭アドレスを返す。</p>

<p>最大64byteだがこれを超えるサイズが要求されたら<code>kz_sysdown()</code>でシステム停止となる。</p>

<h4 id="メモリ領域の開放">メモリ領域の開放</h4>

<p><a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/memory.c">memory.c</a>に実装を行う。</p>

<p><code>kzmem_free</code>を実装。開放するデータ領域の先頭アドレスが引数として渡される。アドレスを一つ遡りメモリヘッダを見つけてブロック・サイズを取得し、該当のメモリ・プールのリンクリストの先頭に接続する。</p>

<h4 id="システム-コールの追加">システム・コールの追加</h4>

<p>メモリ管理はOSの役割であり、システムコールとして実装するのが適切である。</p>

<p><a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/syscall.h">syscall.h</a>、<a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/syscall.c">syscall.c</a>、<a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/kozos.h">kozos.h</a>、<a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/kozos.c">kozos.c</a>に修正を行う。</p>

<p><a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/syscall.h">syscall.h</a>にはシステムコール番号（<code>KZ_SYSCALL_TYPE_KMALLOC</code>, <code>KZ_SYSCALL_TYPE_KMFREE</code>）の追加、引数と戻り値の受け渡しのための構造体にパラメータ領域を追加。</p>

<p><a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/syscall.c">syscall.c</a>に</p>

<ul>
<li><code>void *kz_kmalloc(int size);</code><br /></li>
<li><code>int kz_kmfree(void *p);</code><br />
<br /></li>
</ul>

<p>の二種類を追加する。</p>

<p><a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/kozos.h">kozos.h</a>には今回実装した<code>kz_kmalloc</code>と<code>kz_kmfree</code>のプロトタイプ宣言を行なっている。また今回のサンプルプログラムのための<code>test10_1_main()</code>のプロトタイプ宣言も合わせて行う。</p>

<p><a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/kozos.c">kozos.c</a>では、<code>kz_kmalloc()</code>と<code>kz_kmfree()</code>の処理の実態として、<code>thread_kmalloc()</code>と<code>thread_kmfree()</code>を追加。処理としては<code>memory.c</code>に定義した関数を呼んでいるだけ。</p>

<p><code>kz_start()</code>のメモリ・プールの初期化関数である<code>kzmem_init()</code>を呼ぶ処理を追加。</p>

<h4 id="サンプル-プログラム">サンプル・プログラム</h4>

<p><a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/test10_1.c">test10_1.c</a>に実装を行う。</p>

<p>4〜56のサイズでメモリの獲得。獲得したメモリに対してメモリフィル（aやbなどの特定パターンで埋める）。出力。開放。を行う。</p>

<p><a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/main.c">main.c</a>にも変更を加えて、<code>test10_1_main</code>がスレッドで起動するように修正。</p>

<p><a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/Makefile">Makefile</a>にコンパイル対象を加えて終わり。</p>

<h3 id="プログラムの実行">プログラムの実行</h3>

<pre><code>kzload&gt; run
starting from entry point: ffc020
kozos boot succeed!
test10_1 started.
00ffd258 aaa
00ffd268 bbb
00ffd268 aaaaaaa
00ffd258 bbbbbbb
00ffd2d8 aaaaaaaaaaa
00ffd2f8 bbbbbbbbbbb
00ffd2f8 aaaaaaaaaaaaaaa
00ffd2d8 bbbbbbbbbbbbbbb
00ffd2d8 aaaaaaaaaaaaaaaaaaa
00ffd2f8 bbbbbbbbbbbbbbbbbbb
00ffd2f8 aaaaaaaaaaaaaaaaaaaaaaa
00ffd2d8 bbbbbbbbbbbbbbbbbbbbbbb
00ffd3d8 aaaaaaaaaaaaaaaaaaaaaaaaaaa
00ffd418 bbbbbbbbbbbbbbbbbbbbbbbbbbb
00ffd418 aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
00ffd3d8 bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
00ffd3d8 aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
00ffd418 bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
00ffd418 aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
00ffd3d8 bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
00ffd3d8 aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
00ffd418 bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
00ffd418 aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
00ffd3d8 bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
00ffd3d8 aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
00ffd418 bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
00ffd418 aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
00ffd3d8 bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
test10_1 exit.
test10_1 EXIT.
</code></pre>

<p>できた。</p>

<pre><code>00ffd258 aaa
00ffd268 bbb
00ffd268 aaaaaaa
00ffd258 bbbbbbb
...
</code></pre>

<p>先頭の16進数が獲得した領域のアドレス。3文字とか7文字になっているのは末尾にヌル・ターミネータ（<code>'\0'</code>）を入れているから。アドレスが交互に取得されている（ 00ffd258 =&gt; 00ffd268 =&gt;  00ffd268 =&gt; 00ffd258）のは獲得した順に開放し、後に開放された領域がリンクリストの先頭にくるためである。</p>

<p><code>readelf</code>をした結果は<a href="https://github.com/wtrdr/os-advent2017/blob/master/10/os/readelf-result2.txt">readelf-result2.txt</a>に置いておく。</p>

<p><code>freearea</code>は<code>00ffd250</code>からメモリプールが開始されているので、ヘッダのサイズは8byteであるため、<code>00ffd250</code>に8byteを加算すると<code>00ffd258</code>となるので一番最初の16進数が示すアドレスと一致している。他の表示も同様に、確保した（allocした）byteに対して最小のメモリプールから領域が取得され、それぞれリンクリストの出し入れにしたがって順番に利用されているのがわかる。</p>

<hr />

<p>メモリ管理も奥が深い。JVMとかは動的なメモリ確保の仕組みを作っていたりとかするのだからこの辺りの知識は必須だろう。しかし、ポインタ周りがなんというか技巧的に見えて何やっているのかを想像しながら書くってのが読みづらい。まぁそれも味か。今日はこの辺りで。あとはstep11とstep12を残すのみとなった。</p>

              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-meta">
                    
  <a class="link-unstyled" href="https://blog.wataridori.co.jp/tags/%E3%83%88%E3%83%AA%E3%83%AD%E3%82%B0/">トリログ</a>

  <a class="link-unstyled" href="https://blog.wataridori.co.jp/tags/tech/">Tech</a>

  <a class="link-unstyled" href="https://blog.wataridori.co.jp/tags/advent/">Advent</a>

  <a class="link-unstyled" href="https://blog.wataridori.co.jp/tags/%E6%8C%91%E6%88%A6/">挑戦</a>


                  </div>
                
              
            
            <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://blog.wataridori.co.jp/2018/02/%E3%83%95%E3%82%A3%E3%83%AA%E3%83%94%E3%83%B3%E3%83%9E%E3%83%8B%E3%83%A9%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%882%E6%97%A5%E7%9B%AE%E3%81%9D%E3%81%AE%EF%BC%92/" data-tooltip="【フィリピン】マニラレポート（2日目その２）">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">次の投稿</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://blog.wataridori.co.jp/2018/02/%E3%83%95%E3%82%A3%E3%83%AA%E3%83%94%E3%83%B3%E3%83%9E%E3%83%8B%E3%83%A9%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%882%E6%97%A5%E7%9B%AE%E3%81%9D%E3%81%AE%EF%BC%91/" data-tooltip="【フィリピン】マニラレポート（2日目その１）">
              
                  <span class="hide-xs hide-sm text-small icon-mr">前の投稿</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.wataridori.co.jp/2018/02/os%E8%87%AA%E4%BD%9C%E5%85%A5%E9%96%80-advent35/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://blog.wataridori.co.jp/2018/02/os%E8%87%AA%E4%BD%9C%E5%85%A5%E9%96%80-advent35/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
      
      
    </ul>
  
</div>

            
              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2019 wataridori inc.. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  
      <nav >
        <ul class="post-actions post-action-nav">
          
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://blog.wataridori.co.jp/2018/02/%E3%83%95%E3%82%A3%E3%83%AA%E3%83%94%E3%83%B3%E3%83%9E%E3%83%8B%E3%83%A9%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%882%E6%97%A5%E7%9B%AE%E3%81%9D%E3%81%AE%EF%BC%92/" data-tooltip="【フィリピン】マニラレポート（2日目その２）">
              
                  <i class="fa fa-angle-left"></i>
                  <span class="hide-xs hide-sm text-small icon-ml">次の投稿</span>
                </a>
            </li>
            <li class="post-action">
              
                <a class="post-action-btn btn btn--default tooltip--top" href="https://blog.wataridori.co.jp/2018/02/%E3%83%95%E3%82%A3%E3%83%AA%E3%83%94%E3%83%B3%E3%83%9E%E3%83%8B%E3%83%A9%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%882%E6%97%A5%E7%9B%AE%E3%81%9D%E3%81%AE%EF%BC%91/" data-tooltip="【フィリピン】マニラレポート（2日目その１）">
              
                  <span class="hide-xs hide-sm text-small icon-mr">前の投稿</span>
                  <i class="fa fa-angle-right"></i>
                </a>
            </li>
          
        </ul>
      </nav>
    <ul class="post-actions post-action-share" >
      
        <li class="post-action hide-lg hide-md hide-sm">
          <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
            <i class="fa fa-share-alt"></i>
          </a>
        </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://blog.wataridori.co.jp/2018/02/os%E8%87%AA%E4%BD%9C%E5%85%A5%E9%96%80-advent35/">
              <i class="fa fa-facebook-official"></i>
            </a>
          </li>
        
          <li class="post-action hide-xs">
            <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://blog.wataridori.co.jp/2018/02/os%E8%87%AA%E4%BD%9C%E5%85%A5%E9%96%80-advent35/">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
        
      
      
    </ul>
  
</div>

      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-close"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.wataridori.co.jp%2F2018%2F02%2Fos%25E8%2587%25AA%25E4%25BD%259C%25E5%2585%25A5%25E9%2596%2580-advent35%2F">
          <i class="fa fa-facebook-official"></i><span>Facebookで共有</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fblog.wataridori.co.jp%2F2018%2F02%2Fos%25E8%2587%25AA%25E4%25BD%259C%25E5%2585%25A5%25E9%2596%2580-advent35%2F">
          <i class="fa fa-twitter"></i><span>Twitterで共有</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="https://cdn.rawgit.com/wtrdr/blog/gh-pages/img/logo.jpg" alt="プロフィール画像" />
    
    <h4 id="about-card-name">wataridori inc.</h4>
    
      <div id="about-card-bio">未知の体験とワクワクを。</div>
    
    
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" rel="noopener" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="検索" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center"></div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://blog.wataridori.co.jp/2019/01/%E4%BB%8A%E5%B9%B4%E3%82%82%E5%A7%8B%E3%81%BE%E3%81%A3%E3%81%A61%E3%83%B6%E6%9C%88%E3%81%8C%E7%B5%8C%E3%81%A8%E3%81%86%E3%81%A8%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B/">
                <h3 class="media-heading">今年も始まって1ヶ月が経とうとしている</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">明けました2019 今年も既に動きはじめているが、こんな一年にしたいなというのを打ち立てた。 今年は 「変化」 の年や！ 去年はいろんな場所に行き、モ</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://blog.wataridori.co.jp/2019/01/%E9%95%B7%E9%87%8E%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E5%A0%B4%E6%89%80%E6%8E%A2%E3%81%97%E6%8C%AF%E3%82%8A%E5%87%BA%E3%81%97%E3%81%AB%E6%88%BB%E3%82%8B/">
                <h3 class="media-heading">長野プロジェクト：場所探し、振り出しに戻る</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2019
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">ワタリドリは長野に拠点を作ることにしました！ 今の場所はそのままにおいておくつもりで、 長野は私達が住む場所、開かれた場所、旅人が休める場所。 私</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://blog.wataridori.co.jp/2018/12/%E9%95%B7%E9%87%8E%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E5%A0%B4%E6%89%80%E3%82%92%E6%8E%A2%E3%81%99/">
                <h3 class="media-heading">長野プロジェクト：場所を探す</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Dec 12, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">ワタリドリは長野に拠点を作ることにしました！ 今の場所はそのままにおいておくつもりで、 長野は私達が住む場所、開かれた場所、旅人が休める場所。 私</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://blog.wataridori.co.jp/2018/11/%E3%82%BF%E3%82%A4%EF%BC%93%E6%97%A5%E7%9B%AE-%E3%83%81%E3%82%A7%E3%83%B3%E3%83%9E%E3%82%A4%E3%81%AE%E5%8F%B3%E5%81%B4%E3%81%B8/">
                <h3 class="media-heading">【タイ】３日目　チェンマイの右側へ</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">カフェで朝食を ゲストハウスのフリーの朝食はパスしてチェックアウト。 今日の予定はSPチキン。 まずは徒歩圏内のカフェで朝食を。 鳥はチーズのホット</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://blog.wataridori.co.jp/2018/11/%E3%82%BF%E3%82%A4%EF%BC%92%E6%97%A5%E7%9B%AE-%E3%83%81%E3%82%A7%E3%83%B3%E3%83%9E%E3%82%A4%E5%B7%A6%E5%81%B4%E4%B8%8A%E3%82%92%E3%82%86%E3%82%8B%E3%82%86%E3%82%8B/">
                <h3 class="media-heading">【タイ】２日目　チェンマイ左側上をゆるゆる</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">チェンマイってお堀があって、その中を旧市街地と言って、観光客がたくさんいます。 郊外に出ればお高めのホテルがあったり、自然豊かみたいだけど、仕</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://blog.wataridori.co.jp/2018/11/%E3%82%BF%E3%82%A4%EF%BC%91%E6%97%A5%E7%9B%AE-%E3%83%81%E3%82%A7%E3%83%B3%E3%83%9E%E3%82%A4%E3%81%AB%E5%88%B0%E7%9D%80/">
                <h3 class="media-heading">【タイ】１日目　チェンマイに到着</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Nov 11, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">先行き不安な。。笑 今回は、scoot（スクート）というシンガポールのCLLでバンコクのドンムアン空港へ。 そこから、国内線でチェンマイに行きま</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://blog.wataridori.co.jp/2018/08/%E5%A4%B1%E3%82%8F%E3%82%8C%E3%81%9F20%E5%B9%B4%E3%81%A8%E4%BA%BA%E9%80%A0%E4%BA%BA%E9%96%93/">
                <h3 class="media-heading">失われた20年と人造人間</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Aug 8, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">失われていく日々 昭和という「レガシー」を引きずった平成30年間の経済停滞を振り返る こんな記事が上がっていた。日本の企業ってのは昔はすごかった</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://blog.wataridori.co.jp/2018/07/%E6%B1%BA%E3%81%BE%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E3%81%93%E3%81%A8%E3%82%84%E3%82%8B%E3%81%93%E3%81%A8/">
                <h3 class="media-heading">決まっていること・やること</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jul 7, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">古民家でゲストハウスだ。 と思ったのはアメリカから帰ってきた直後。 それ以外表現のしようがなかったのでそう言っているのだが。 アメリカで10年来の</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://blog.wataridori.co.jp/2018/06/%E6%97%85%E3%83%AD%E3%82%B0%E3%83%AA%E3%82%B9%E3%83%88/">
                <h3 class="media-heading">旅ログリスト</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jun 6, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">旅ログ。 書くのが遅くて、準備中がどんどん溜まっていく(笑) なんで書くんだっけ？ ・素敵な場所と出会いとその時感じたことを忘れないように ・この場</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://blog.wataridori.co.jp/2018/05/%E3%83%95%E3%82%A3%E3%83%AA%E3%83%94%E3%83%B3%E3%82%A8%E3%83%AB%E3%83%8B%E3%83%89-%E3%83%AC%E3%83%9D%E3%83%BC%E3%83%88-%E3%81%9D%E3%81%AE%EF%BC%92/">
                <h3 class="media-heading">【フィリピン】エルニド　レポート　その２</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  May 5, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather">2017年11月にフィリピンに行ってきました。 3日目は早朝、ホテルを出発してパラワン島・エルニドへ。エルニド到着後はお散歩したあと、トライシ</div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero=""
         data-message-one=""
         data-message-other="">
         106 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('https://cdn.rawgit.com/wtrdr/blog/gh-pages/img/top2.jpg');"></div>
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.7/js/jquery.fancybox.min.js" integrity="sha256-GEAnjcTqVP+vBp3SSc8bEDQqvWAZMiHyUSIorrWwH50=" crossorigin="anonymous"></script>


<script src="https://blog.wataridori.co.jp/js/script-qi9wbxp2ya2j6p7wx1i6tgavftewndznf4v0hy2gvivk1rxgc3lm7njqb6bz.min.js"></script>



<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>


  
    
  



    
  </body>
</html>

